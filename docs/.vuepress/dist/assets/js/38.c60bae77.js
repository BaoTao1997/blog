(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{218:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"_1-vue组件通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue组件通信","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.Vue组件通信")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("对于多组件之间的状态共享"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("我们需要通过state规定统一的数据仓库"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n只能通过Action和Mutation实现数据的更改"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("然后实现多组件的数据同时改变\n\n总结"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("props父传子"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("$emit自定义事件子传父"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("都是")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vue命令"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("子组件内容 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 父组件内容\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v("父组件向子组件传值\n父组件中的 v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("'"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("子组件props中的属性名称")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("若子组件props中的名称为myName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n由于"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTML")]),s._v("特性不区分大小写"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("所以这里采用my"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'='")]),s._v("父组件中的属性名称'\n注意如果是静态字符串则可以不用v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("否则必须使用\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("子组件向父组件传值")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("自定义事件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("回调函数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("自定义事件"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n子组件通过事件"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$emit('")]),s._v("modify"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("', this.modifylist);'")]),s._v("传递消息给父组件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n再用v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'子组件事件名称'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'父组件事件名称'")]),s._v("\n简化写法即为"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[s._v("`v-model`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("主要用于表单的双向绑定"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("实际上是\n"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('`<input type="text" v-model="name">`')])]),s._v("\n相当于："),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('`<input type="text" :value="name" @input="name = $event.target.value">`')])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("回调函数"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("\n通过"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'v-bind:callback=\"callback\"'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("用props将回调函数传给子组件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n然后在子组件中用v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("click"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"callback"')]),s._v("绑定该方法\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("兄弟组件传值")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("可以用一个父组件做中继"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("也可以用事件总线"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("介绍一下事件总线"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n新建一个bus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("js")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("事件总线EventBus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Vue "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Vue'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" eventbus "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" eventbus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n并在兄弟组件中引入"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("然后"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n组件"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("用eventBus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("$emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1to2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emmit'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n组件"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("则用eventBus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1to2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fromBrother "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 保证事件名称相同\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v("更深层次的注入provide"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("inject\n在组件中使用provide"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("provide")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    getMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getMap\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n其所有的子组件及后代可以通过inject来进行获取getMap方法"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\ninject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'getMap'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])])])},[],!1,null,null,null);t.default=e.exports}}]);